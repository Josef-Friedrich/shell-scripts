#!/bin/sh

P=../../

test_parameters() {
	assert_fail "${P}imagemagick-imslp.sh" > /dev/null 2>&1
}

test_help() {
	assert "${P}imagemagick-imslp.sh -h"  > /dev/null 2>&1
}

test_source() {
	. ${P}imagemagick-imslp.sh.00
	assert_equals "$(_usage | head -n 1)" "Usage: bash_unit [-bfht] <filename-or-glob-pattern>"
}

test_remove_extension() {
	. ${P}imagemagick-imslp.sh.00
	assert_equals "$(_remove_extension filename.png)" "filename"
	assert_equals "$(_remove_extension filename.png.png)" "filename.png"
}

test_get_channels() {
	. ${P}imagemagick-imslp.sh.00
	local TMP=$(mktemp)
  fake identify 'echo $FAKE_PARAMS > $TMP'
  _get_channels filename.png
  assert_equals filename.png "$(head -n1 $TMP)"
	rm -f "$TMP"
}
